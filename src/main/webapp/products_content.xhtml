<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:form id="productForm" style="overflow-y: scroll; margin: 80px auto;">
    <style type="text/css">
    </style>
    <p:panel header="Termékek" id="productPanel" >
        <div class="card">

            <p:panelGrid columns="3" contentStyle="margin: 0px; padding: 0px; line-height: 21px;"
                         columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4"
                         layout="grid"
                         styleClass="ui-panelgrid-blank ui-fluid "
                         style="border:0px none; padding: 0px; width: 100%;">
                <p:divider >
                    <p:outputLabel for="name" value="Termék neve: "/><br/>
                    <p:inputText id="name" value="#{productController.dto.id}" required="true" requiredMessage="Kötelező kitölteni!" /><br/>
                    <p:outputLabel for="firstunit" value="Mennyiségi egység 1: "/><br/>
                    <p:selectOneMenu id="firstunit" value="#{productController.dto.firstUnit}"  converter="#{unitConverter}">
                        <f:selectItems value="#{unitController.dtoList}" var="unitvar" itemLabel="#{unitvar.id}" itemValue="#{unitvar}"/>
                    </p:selectOneMenu><br/>
                    <p:outputLabel for="secondunit" value="Mennyiségi egység 2: "/><br/>
                    <p:selectOneMenu id="secondunit"  value="#{productController.dto.secondUnit}"  converter="#{unitConverter}">
                        <f:selectItems value="#{unitController.dtoList}" var="unitvar" itemLabel="#{unitvar.id}" itemValue="#{unitvar}"/>
                    </p:selectOneMenu><br/>
                </p:divider>
                <p:divider >
                    <p:outputLabel for="price" value="Egységár: "/><br/>
                    <p:inputText id="price" value="#{productController.dto.price}" required="true" requiredMessage="Kötelező kitölteni!" /><br/>
                    <p:outputLabel for="comp" value="Kompenzációs felár: "/><br/>
                    <p:selectOneMenu id="comp" value="#{productController.dto.compPercent}"  style="max-width: 120px" ><br/>
                        <f:selectItem itemLabel="7%" itemValue="7"/>
                        <f:selectItem itemLabel="12%" itemValue="12"/>
                        <f:selectItem itemLabel="0%" itemValue="0"/>
                    </p:selectOneMenu><p/>
                    <p:outputLabel for="tar" value="Vám tarifaszám: "/><br/>
                    <p:inputText id="tar" value="#{productController.dto.tariffnum}" required="true" requiredMessage="Kötelező kitölteni!" /><br/>
                </p:divider>
                <p:divider>
                    <h:commandButton value="#{productController.label}"
                                     action="#{productController.uiSaveProduct}"
                                     style="width: 10em;height: 2.6em">
                        <f:ajax execute="productForm" render="productList productPanel" />
                    </h:commandButton>

                    <h:commandButton value="Új"
                                     action="#{productController.newProduct}"
                                     style="width: 10em;height: 2.6em">
                        <f:ajax execute="productForm" render="productList productPanel" />
                    </h:commandButton>
                    <h:commandButton value="Töröl"
                                     action="#{productController.deleteProduct}"
                                     style="width: 10em;height: 2.6em">
                        <f:ajax execute="productForm" render="productList productPanel" />
                    </h:commandButton>
                </p:divider>

            </p:panelGrid>

        </div>
    </p:panel>
    <p:dataTable var="product" value="#{productController.dtoList}" id="productList"
                 lazy="false" sortBy="#{productController.sortBy}" sortMode="single"
                 allowUnsorting="true" style="overflow-x: scroll; margin-bottom: 5em" scrollable="true" scrollWidth="100%"
                 selectionMode="single" emptyMessage="Nincs találat" resizableColumns="true"
                 selection="#{productController.dto}" rowKey="#{product.id}">
        <p:ajax event="rowSelect"  listener="#{productController.editProduct}" update="productForm:productPanel"/>
        <p:column headerText="Terméknév" sortBy="#{product.id}" filterBy="#{product.id}" filterMatchMode="contains" width="5em" >
            <h:outputText value="#{product.id}" id="id"/>
        </p:column>
        <p:column headerText="Me.egys.1" sortBy="#{product.firstUnit.unitName}" filterBy="#{product.firstUnit.unitName}" filterMatchMode="contains" width="4em">
            <h:outputText value="#{product.firstUnit.unitName}"/>
        </p:column>
        <p:column headerText="Me.egys.2" sortBy="#{product.secondUnit.unitName}" filterBy="#{product.secondUnit.unitName}" filterMatchMode="contains" width="4em">
            <h:outputText value="#{product.secondUnit.unitName}"/>
        </p:column>
        <p:column headerText="Egységár" sortBy="#{product.price}" filterBy="#{product.price}" filterMatchMode="contains" width="5em" >
            <h:outputText value="#{product.price}"/>
        </p:column>
        <p:column headerText="Komp.felár(%)" sortBy="#{product.compPercent}" filterBy="#{product.compPercent}" filterMatchMode="contains" width="6em" >
            <h:outputText value="#{product.compPercent}"/>
        </p:column>
        <p:column headerText="VTSZ" sortBy="#{product.tariffnum}" filterBy="#{product.tariffnum}" filterMatchMode="contains" width="10em" >
            <h:outputText value="#{product.tariffnum}"/>
        </p:column>
    </p:dataTable>
</h:form>
</html>




